"use strict";(self.webpackChunkcrypto_jingles=self.webpackChunkcrypto_jingles||[]).push([[535],{10535:(e,n,t)=>{t.r(n),t.d(n,{default:()=>X});var i=t(71002),a=t(15861),l=t(15671),r=t(43144),s=t(97326),o=t(60136),c=t(82963),p=t(61120),g=t(4942),A=t(87757),d=t.n(A),u=t(67294),m=t(25264),C=t(73727),f=t(9669),B=t.n(f),h=t(45697),x=t.n(h),j=t(89528),w=t(67917),b=t(31841),v=t(54733),y=t(6752),k=t(62692),G=t(79484),E=t(5056),Z=t(67661),S=t(93379),P=t.n(S),N=t(7795),M=t.n(N),O=t(90569),T=t.n(O),Y=t(3565),z=t.n(Y),J=t(19216),R=t.n(J),U=t(44589),q=t.n(U),W=t(22283),D={};D.styleTagTransform=q(),D.setAttributes=z(),D.insert=T().bind(null,"head"),D.domAPI=M(),D.insertStyleElement=R();P()(W.Z,D);W.Z&&W.Z.locals&&W.Z.locals;function I(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function L(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?I(Object(t),!0).forEach((function(n){(0,g.Z)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):I(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function _(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,i=(0,p.Z)(e);if(n){var a=(0,p.Z)(this).constructor;t=Reflect.construct(i,arguments,a)}else t=i.apply(this,arguments);return(0,c.Z)(this,t)}}var H=function(e){(0,o.Z)(t,e);var n=_(t);function t(e){var r;return(0,l.Z)(this,t),r=n.call(this,e),(0,g.Z)((0,s.Z)(r),"getJingle",(function(e){return new Promise(function(){var n=(0,a.Z)(d().mark((function n(t){var i,a,l,s,o,c;return d().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=r.props,a=i.address,l=i.lockedMM,s=i.hasMM,n.next=3,B()("".concat(y.T5,"/jingle/").concat(e));case 3:if(o=(o=n.sent).data){n.next=8;break}return t(!1),n.abrupt("return");case 8:if(s&&!l){n.next=12;break}o.liked=!1,n.next=16;break;case 12:return n.next=14,B()("".concat(y.T5,"/jingle/check-liked/").concat(a,"/").concat(e));case 14:c=n.sent,o.liked=c.data;case 16:t(o);case 17:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())})),(0,g.Z)((0,s.Z)(r),"loadPage",function(){var e=(0,a.Z)(d().mark((function e(n){var t,a,l;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.address,e.next=3,r.getJingle(n);case 3:if(a=e.sent,"object"===(0,i.Z)(a)){e.next=7;break}return r.setState({validJingle:!1}),e.abrupt("return");case 7:l=a.owner===t,r.setState({jingle:a,isOwner:l,validJingle:!0});case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),(0,g.Z)((0,s.Z)(r),"purchase",(0,a.Z)(d().mark((function e(){var n,t,i,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.state.jingle,t=r.props.address,i=(0,v.M8)(),r.props.addPendingTx(i,"Buy Jingle"),e.next=6,window.marketplaceContract.buy(n.jingleId,{from:t,value:n.price});case 6:return r.props.removePendingTx(i),e.next=9,r.getJingle(n.jingleId);case 9:n=e.sent,a=n.owner===t,r.setState({jingle:n,isOwner:a});case 12:case"end":return e.stop()}}),e)})))),(0,g.Z)((0,s.Z)(r),"sell",(0,a.Z)(d().mark((function e(){var n,t,i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=r.state.salePrice)&&n<=0)){e.next=3;break}return e.abrupt("return");case 3:return t=r.state.jingle,i=(0,v.M8)(),r.props.addPendingTx(i,"Sell Jingle"),e.next=8,window.jingleContract.approveAndSell(t.jingleId,n,{from:r.props.address});case 8:return r.props.removePendingTx(i),e.next=11,r.getJingle(t.jingleId);case 11:t=e.sent,r.setState({jingle:t});case 13:case"end":return e.stop()}}),e)})))),(0,g.Z)((0,s.Z)(r),"cancelSale",(0,a.Z)(d().mark((function e(){var n,t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.state.jingle,t=(0,v.M8)(),r.props.addPendingTx(t,"Cancel Sale"),e.next=5,window.marketplaceContract.cancel(n.jingleId,{from:r.props.address});case 5:return r.props.removePendingTx(t),e.next=8,r.getJingle(n.jingle);case 8:n=e.sent,r.setState({jingle:n});case 10:case"end":return e.stop()}}),e)})))),(0,g.Z)((0,s.Z)(r),"handleSalePriceChange",(function(e){r.setState({salePrice:(0,Z.qw)(e.target.value)})})),(0,g.Z)((0,s.Z)(r),"loadJingle",(function(){var e=r.state.jingle.sampleTypes.map((function(e,n){return new Promise((function(t){var i=new j.Sound((0,k.H)(e).source,(function(){t(i),i.volume=parseInt(r.state.jingle.settings[n],10)/100}))}))}));r.setState({loading:!0}),Promise.all(e).then((function(e){r.setState({sound:new j.Group(e),loading:!1}),r.playSound()}))})),(0,g.Z)((0,s.Z)(r),"playSound",(function(){null!==r.state.sound?((0,E.Q)(r.state.sound,r.state.jingle.settings).on("stop",(function(){r.setState({start:!1})})),r.setState({start:!0})):r.loadJingle()})),(0,g.Z)((0,s.Z)(r),"stopSound",(function(){r.state.sound&&(r.state.sound.stop(),r.setState({start:!1}))})),(0,g.Z)((0,s.Z)(r),"jingleLikeUnlike",function(){var e=(0,a.Z)(d().mark((function e(n,t){var i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Z.$M)(n,t,r.props.address);case 2:(i=e.sent)&&r.setState({jingle:L(L({},r.state.jingle),i)});case 4:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),r.state={jingle:null,validJingle:!0,loading:!1,isOwner:!1,start:!1,sound:null,salePrice:void 0},r.loadPage=r.loadPage.bind((0,s.Z)(r)),r.stopSound=r.stopSound.bind((0,s.Z)(r)),r.playSound=r.playSound.bind((0,s.Z)(r)),r.loadJingle=r.loadJingle.bind((0,s.Z)(r)),r.jingleLikeUnlike=r.jingleLikeUnlike.bind((0,s.Z)(r)),r}return(0,r.Z)(t,[{key:"UNSAFE_componentWillMount",value:function(){this.loadPage(this.props.match.params.id)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.match.params.id!==this.props.match.params.id&&this.loadPage(e.match.params.id)}},{key:"componentWillUnmount",value:function(){this.stopSound()}},{key:"render",value:function(){var e=this,n=this.state,t=n.jingle,i=n.isOwner,a=n.validJingle,l=this.props,r=l.hasMM,s=l.lockedMM,o=l.canLike;return u.createElement("div",{className:"container single-jingle-wrapper"},a&&u.createElement("div",null,u.createElement("div",{className:"row"},u.createElement("div",{className:"col-md-2"}),u.createElement("div",{className:"col-md-8 row-wrapper-jingle"},t&&u.createElement("div",null,u.createElement("div",{className:"jingle-id"},"#",t.jingleId),u.createElement("div",{className:"jingle-details-wrapper"},u.createElement("div",{className:"buy-options"},u.createElement("div",{className:"jingle-page-img"},u.createElement("div",{className:"overlay"},this.state.loading&&u.createElement(G.Z,null),!this.state.start&&!this.state.loading&&u.createElement("span",{onClick:this.playSound},u.createElement("i",{className:"material-icons play"},"play_circle_outline")),this.state.start&&!this.state.loading&&u.createElement("span",{onClick:this.stopSound},u.createElement("i",{className:"material-icons stop"},"cancel"))),u.createElement(w.Z,{id:t.jingleId,width:250,height:250})),u.createElement("div",{className:"liked-section"},u.createElement("span",{onClick:function(){e.jingleLikeUnlike(t.jingleId,!t.liked)}},u.createElement(b.Z,{active:t.liked,size:"40",canLike:r&&!s&&o})),t.likeCount),t.onSale&&u.createElement("div",{className:"sell-price-wrapper"},u.createElement("h3",null,u.createElement("span",null,"Sell price:"),u.createElement("span",{className:"price"},(0,Z.$G)(t.price),"Îž")),!i&&r&&!s&&u.createElement("button",{type:"submit",className:"btn buy-button",onClick:this.purchase},"Purchase")),!t.onSale&&i&&r&&!s&&u.createElement("form",{className:"sell-form",onSubmit:function(e){return e.preventDefault()}},u.createElement("input",{className:"form-control",placeholder:"Sell price in ETH",type:"number",step:"any",onChange:this.handleSalePriceChange}),u.createElement("button",{type:"submit",className:"btn buy-button",onClick:this.sell},"Put on sale")),t.onSale&&r&&!s&&i&&u.createElement("button",{type:"button",className:"btn buy-button",onClick:this.cancelSale},"Cancel Sale")),u.createElement("div",{className:"jingle-details"},u.createElement("div",{className:"jingle-label owner"},u.createElement("h4",null,"Owner"),u.createElement("div",null,u.createElement(C.rU,{to:"/profile/".concat(t.owner)},t.owner))),u.createElement("div",{className:"jingle-label"},u.createElement("h4",null,"Author"),u.createElement("div",null,t.author)),u.createElement("div",{className:"jingle-label"},u.createElement("h4",null,"Name"),u.createElement("div",null,t.name)),u.createElement("div",{className:"jingle-samples-wrapper"},u.createElement("h4",null,"Samples"),u.createElement("div",{className:"samples"},t.sampleTypes.map((function(e){var n=(0,k.H)(e);return u.createElement("span",{key:e,className:"sample"},n.name)})))))))),u.createElement("div",{className:"col-md-2"}))),!a&&u.createElement("div",{className:"not-valid-message"},"The jingle you are searching for does not yet exist."))}}]),t}(u.Component);H.propTypes={match:x().object.isRequired,hasMM:x().bool.isRequired,lockedMM:x().bool.isRequired,canLike:x().bool.isRequired,address:x().string.isRequired,addPendingTx:x().func.isRequired,removePendingTx:x().func.isRequired};const X=(0,m.$j)((function(e){return{hasMM:e.app.hasMM,lockedMM:e.app.lockedMM,canLike:e.app.canLike,address:e.app.address}}),{addPendingTx:v.h,removePendingTx:v.z6})(H)},22283:(e,n,t)=>{t.d(n,{Z:()=>s});var i=t(94015),a=t.n(i),l=t(23645),r=t.n(l)()(a());r.push([e.id,".single-jingle-wrapper{margin-top:100px}.single-jingle-wrapper .jingle-id{font-size:50px;font-weight:bold;font-style:italic;color:#C0C7D1;margin-bottom:20px}.row-wrapper-jingle{display:flex;justify-content:center}.jingle-details-wrapper{display:flex}.jingle-details-wrapper img{margin-right:50px;height:250px}.jingle-details{display:inline-flex;flex-direction:column;max-width:400px}.jingle-details .jingle-label{margin-bottom:20px}.jingle-label.owner div{cursor:pointer;max-width:400px;overflow:hidden;text-overflow:ellipsis;transition:0.2s}.jingle-label.owner div a{color:#828894}.jingle-label.owner div a:hover{text-decoration:none}.jingle-label.owner div:hover{opacity:0.75}.jingle-details .jingle-label h4,.jingle-samples-wrapper h4{color:#C0C7D1;font-weight:bold;text-transform:uppercase;margin-bottom:2px}.jingle-details .jingle-label:first-child h4{margin-top:0}.jingle-details .jingle-label div{color:#828894;font-size:27px}.samples{margin-top:10px;display:flex;align-items:center;flex-wrap:wrap;justify-content:stretch}.samples .sample{font-size:16px;background:lightgray;border-radius:4px;padding:4px 8px;margin-right:7px;margin-bottom:7px;color:#485355}.buy-options{display:flex;flex-direction:column}.buy-button{color:white;background:#ED5253;width:250px;font-size:20px;text-align:center;margin-top:20px}.buy-button:hover{opacity:0.8}.jingle-page-img{position:relative;margin-right:45px}.jingle-page-img:hover .overlay{visibility:visible;background:rgba(0,0,0,0.5)}.jingle-page-img .overlay{position:absolute;transition:0.2s ease-in;display:flex;visibility:hidden;z-index:10;top:0;left:0;height:250px;width:100%;align-items:center;justify-content:space-evenly}.jingle-page-img .overlay .play,.jingle-page-img .overlay .stop{color:white;cursor:pointer;font-size:65px}.jingle-page-img .jingle-image-wrapper{height:250px}.sell-form{margin-top:20px;display:inline-flex;flex-direction:column}.sell-form input{width:100%;text-align:right;max-width:250px}.sell-price-wrapper h3{margin:20px 0 0 0;display:flex;max-width:250px;justify-content:space-between}.sell-price-wrapper h3 .price{font-weight:bold}.single-jingle-wrapper #load,.single-jingle-wrapper .loading-icon-wrapper{width:61px}.single-jingle-wrapper #load #loading-inner{width:58px;stroke:#fff}.jingle-page-no-mm{text-align:center}.single-jingle-wrapper .liked-section{margin:10px 45px -10px 0;display:flex;align-items:center;justify-content:flex-end}.single-jingle-wrapper .liked-section span{display:flex;align-items:center}\n","",{version:3,sources:["webpack://./src/components/JinglePage/JinglePage.scss"],names:[],mappings:"AAAA,uBACI,gBAAiB,CACpB,kCAGG,cAAe,CACf,gBAAiB,CACjB,iBAAkB,CAClB,aAAc,CACd,kBAAmB,CACtB,oBAGG,YAAa,CACb,sBAAuB,CAC1B,wBAGG,YAAa,CAChB,4BAGG,iBAAkB,CAClB,YAAa,CAChB,gBAGG,mBAAoB,CACpB,qBAAsB,CACtB,eAAgB,CACnB,8BAGG,kBAAmB,CACtB,wBAGG,cAAe,CACf,eAAgB,CAChB,eAAgB,CAChB,sBAAuB,CACvB,eAAgB,CACnB,0BAGG,aAAc,CACjB,gCAGG,oBAAqB,CACxB,8BAGG,YAAa,CAChB,4DAGG,aAAc,CACd,gBAAiB,CACjB,wBAAyB,CACzB,iBAAkB,CACrB,6CAGG,YAAa,CAChB,kCAGG,aAAc,CACd,cAAe,CAClB,SAGG,eAAgB,CAChB,YAAa,CACb,kBAAmB,CACnB,cAAe,CACf,uBAAwB,CAC3B,iBAGG,cAAe,CACf,oBAAqB,CACrB,iBAAkB,CAClB,eAAgB,CAChB,gBAAiB,CACjB,iBAAkB,CAClB,aAAc,CACjB,aAGG,YAAa,CACb,qBAAsB,CACzB,YAGG,WAAY,CACZ,kBAAmB,CACnB,WAAY,CACZ,cAAe,CACf,iBAAkB,CAClB,eAAgB,CACnB,kBAGG,WAAY,CACf,iBAGG,iBAAkB,CAClB,iBAAkB,CACrB,gCAGG,kBAAmB,CACnB,0BAA8B,CACjC,0BAGG,iBAAkB,CAClB,uBAAwB,CACxB,YAAa,CACb,iBAAkB,CAClB,UAAW,CACX,KAAM,CACN,MAAO,CACP,YAAa,CACb,UAAU,CACV,kBAAmB,CACnB,4BAA6B,CAChC,gEAGG,WAAY,CACZ,cAAe,CACf,cAAe,CAClB,uCAGG,YAAa,CAChB,WAGG,eAAgB,CAChB,mBAAoB,CACpB,qBAAsB,CACzB,iBAGG,UAAW,CACX,gBAAiB,CACjB,eAAgB,CACnB,uBAGG,iBAAkB,CAClB,YAAa,CACb,eAAgB,CAChB,6BAA8B,CACjC,8BAGG,gBAAiB,CACpB,0EAGG,UAAW,CACd,4CAGG,UAAW,CACX,WAAY,CACf,mBAGG,iBAAkB,CACrB,sCAGG,wBAAyB,CACzB,YAAa,CACb,kBAAmB,CACnB,wBAAyB,CAC5B,2CAGG,YAAa,CACb,kBAAmB",sourcesContent:[".single-jingle-wrapper {\n    margin-top: 100px;\n}\n\n.single-jingle-wrapper .jingle-id {\n    font-size: 50px;\n    font-weight: bold;\n    font-style: italic;\n    color: #C0C7D1;\n    margin-bottom: 20px;\n}\n\n.row-wrapper-jingle {\n    display: flex;\n    justify-content: center;\n}\n\n.jingle-details-wrapper {\n    display: flex;\n}\n\n.jingle-details-wrapper img {\n    margin-right: 50px;\n    height: 250px;\n}\n\n.jingle-details {\n    display: inline-flex;\n    flex-direction: column;\n    max-width: 400px;\n}\n\n.jingle-details .jingle-label {\n    margin-bottom: 20px;\n}\n\n.jingle-label.owner div {\n    cursor: pointer;\n    max-width: 400px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    transition: 0.2s;\n}\n\n.jingle-label.owner div a {\n    color: #828894;\n}\n\n.jingle-label.owner div a:hover {\n    text-decoration: none;\n}\n\n.jingle-label.owner div:hover {\n    opacity: 0.75;\n}\n\n.jingle-details .jingle-label h4, .jingle-samples-wrapper h4 {\n    color: #C0C7D1;\n    font-weight: bold;\n    text-transform: uppercase;\n    margin-bottom: 2px;\n}\n\n.jingle-details .jingle-label:first-child h4 {\n    margin-top: 0;\n}\n\n.jingle-details .jingle-label div {\n    color: #828894;\n    font-size: 27px;\n}\n\n.samples {\n    margin-top: 10px;\n    display: flex;\n    align-items: center;\n    flex-wrap: wrap;\n    justify-content: stretch;\n}\n\n.samples .sample {\n    font-size: 16px;\n    background: lightgray;\n    border-radius: 4px;\n    padding: 4px 8px;\n    margin-right: 7px;\n    margin-bottom: 7px;\n    color: #485355;\n}\n\n.buy-options {\n    display: flex;\n    flex-direction: column;\n}\n\n.buy-button {\n    color: white;\n    background: #ED5253;\n    width: 250px;\n    font-size: 20px;\n    text-align: center;\n    margin-top: 20px;\n}\n\n.buy-button:hover {\n    opacity: 0.8;\n}\n\n.jingle-page-img {\n    position: relative;\n    margin-right: 45px;\n}\n\n.jingle-page-img:hover .overlay {\n    visibility: visible;\n    background: rgba(0, 0, 0, 0.5);\n}\n\n.jingle-page-img .overlay {\n    position: absolute;\n    transition: 0.2s ease-in;\n    display: flex;\n    visibility: hidden;\n    z-index: 10;\n    top: 0;\n    left: 0;\n    height: 250px;\n    width:100%;\n    align-items: center;\n    justify-content: space-evenly;\n}\n\n.jingle-page-img .overlay .play, .jingle-page-img .overlay .stop {\n    color: white;\n    cursor: pointer;\n    font-size: 65px;\n}\n\n.jingle-page-img .jingle-image-wrapper {\n    height: 250px;\n}\n\n.sell-form {\n    margin-top: 20px;\n    display: inline-flex;\n    flex-direction: column;\n}\n\n.sell-form input {\n    width: 100%;\n    text-align: right;\n    max-width: 250px;\n}\n\n.sell-price-wrapper h3 {\n    margin: 20px 0 0 0;\n    display: flex;\n    max-width: 250px;\n    justify-content: space-between;\n}\n\n.sell-price-wrapper h3 .price {\n    font-weight: bold;\n}\n\n.single-jingle-wrapper #load, .single-jingle-wrapper .loading-icon-wrapper {\n    width: 61px;\n}\n\n.single-jingle-wrapper #load #loading-inner {\n    width: 58px;\n    stroke: #fff;\n}\n\n.jingle-page-no-mm {\n    text-align: center;\n}\n\n.single-jingle-wrapper .liked-section  {\n    margin: 10px 45px -10px 0;\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n}\n\n.single-jingle-wrapper .liked-section span {\n    display: flex;\n    align-items: center;\n}\n\n"],sourceRoot:""}]);const s=r}}]);
//# sourceMappingURL=sourcemaps/535.155c1170cd1927010da5.bundle.js.map